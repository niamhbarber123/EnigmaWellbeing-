<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Breathe â€¢ Enigma</title>
  <link rel="stylesheet" href="style.css?v=9301" />
</head>

<body class="page-wrap">
  <button id="themeFab" class="theme-toggle-top" type="button" aria-label="Toggle night mode">ğŸŒ™</button>

  <header class="page-header">
    <button class="back-btn" type="button" onclick="enigmaBack()">â†</button>
    <h1>Breathe</h1>
    <p>Follow the rhythm</p>
  </header>

  <main class="page">
    <div class="breathe-wrap">
      <div class="card breathe-card">
        <div class="breathe-stage inhale" id="breatheStage">
          <div class="breathe-core" id="breatheCore"></div>
          <div class="breathe-label" id="breatheText">Inhale</div>
        </div>

        <div class="tool-row" style="margin-top:16px;">
          <button class="tool-btn" type="button" id="breatheStartBtn">Start</button>
          <button class="tool-btn danger" type="button" id="breatheStopBtn">Stop</button>
        </div>

        <div class="tool-row">
          <button class="tool-btn" type="button" onclick="markBreatheDone()">Completed âœ…</button>
        </div>

        <div class="gentle-text" id="breatheDoneMsg">Take your time.</div>
      </div>
    </div>
  </main>

  <nav class="bottom-nav">
    <a href="index.html"><div class="nav-ico">ğŸ </div><span>Home</span></a>
    <a class="active" href="breathe.html"><div class="nav-ico">ğŸŒ¬ï¸</div><span>Breathe</span></a>
    <a href="journal.html"><div class="nav-ico">ğŸ“–</div><span>Journal</span></a>
    <a href="quotes.html"><div class="nav-ico">ğŸ’¬</div><span>Quotes</span></a>
    <a href="game.html"><div class="nav-ico">ğŸ¨</div><span>Colour</span></a>
    <a href="sounds.html"><div class="nav-ico">ğŸµ</div><span>Music</span></a>
    <a href="progress.html"><div class="nav-ico">ğŸ“ˆ</div><span>Progress</span></a>
  </nav>

  <script src="app.js?v=9301"></script>
  <script>
    // Simple inhale/exhale loop
    const stage = document.getElementById("breatheStage");
    const text = document.getElementById("breatheText");
    const startBtn = document.getElementById("breatheStartBtn");
    const stopBtn = document.getElementById("breatheStopBtn");

    let running = false;
    let timer = null;

    function setPhase(phase){
      stage.classList.remove("inhale","exhale");
      stage.classList.add(phase);
      text.textContent = phase === "inhale" ? "Inhale" : "Exhale";
    }

    function loop(){
      if (!running) return;
      setPhase("inhale");
      timer = setTimeout(()=>{
        if (!running) return;
        setPhase("exhale");
        timer = setTimeout(loop, 4000);
      }, 4000);
    }

    startBtn.addEventListener("click", ()=>{
      if (running) return;
      running = true;
      loop();
    });

    stopBtn.addEventListener("click", ()=>{
      running = false;
      clearTimeout(timer);
      setPhase("inhale");
      text.textContent = "Ready";
    });
  </script>
</body>
</html>
