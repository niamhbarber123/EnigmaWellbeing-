<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tap to Colour â€¢ Enigma</title>

  <link rel="apple-touch-icon" sizes="180x180" href="/Enigma-/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/Enigma-/icon-192.png">
  <link rel="manifest" href="/Enigma-/manifest.json">
  <meta name="theme-color" content="#b8a6d9">

  <!-- bump version if Safari caches -->
  <link rel="stylesheet" href="/Enigma-/style.css?v=3001">
</head>

<body class="page-wrap">
  <button id="themeFab" class="theme-toggle-top" type="button" aria-label="Toggle night mode">ğŸŒ™</button>

  <header class="page-header">
    <button class="back-btn" type="button" onclick="enigmaBack()" aria-label="Back">â†</button>
    <h1>Tap to Colour</h1>
    <p>Pick a design, then colour gently</p>
  </header>

  <main class="page">

    <div class="card">
      <div class="section-title">Choose a design</div>
      <!-- THIS MUST EXIST for JS -->
      <div id="designGrid" class="design-grid"></div>
    </div>

    <div class="card">
      <div class="section-title">Mode</div>
      <div class="mode-row">
        <button id="modeNumberBtn" class="mode-btn" type="button">Colour-by-number</button>
        <button id="modeFreeBtn" class="mode-btn" type="button">Free colour</button>
      </div>
      <div class="gentle-text" id="modeHint">Pick a mode to begin.</div>
    </div>

    <div class="card">
      <div class="section-title">Palette</div>
      <!-- THIS MUST EXIST for JS -->
      <div id="palette" class="palette-grid"></div>

      <div class="tool-row">
        <button class="tool-btn" type="button" onclick="enigmaUndo()">Undo</button>
        <button class="tool-btn" type="button" onclick="enigmaEraser()">Eraser</button>
        <button class="tool-btn danger" type="button" onclick="enigmaClear()">Clear</button>
      </div>

      <div class="tool-row">
        <button class="tool-btn" type="button" onclick="markColouringComplete()">Completed âœ…</button>
      </div>

      <div class="gentle-text" id="saveMsg">Loadingâ€¦</div>
    </div>

    <div class="card">
      <div class="section-title">Your page</div>
      <div class="grid-wrap">
        <!-- THIS MUST EXIST for JS -->
        <div id="grid" class="colour-grid"></div>
      </div>
    </div>

  </main>

  <nav class="bottom-nav">
    <a href="/Enigma-/index.html"><div class="nav-ico">ğŸ </div><span>Home</span></a>
    <a href="/Enigma-/breathe.html"><div class="nav-ico">ğŸŒ¬ï¸</div><span>Breathe</span></a>
    <a href="/Enigma-/journal.html"><div class="nav-ico">ğŸ“–</div><span>Journal</span></a>
    <a href="/Enigma-/quotes.html"><div class="nav-ico">ğŸ’¬</div><span>Quotes</span></a>
    <a class="active" href="/Enigma-/game.html"><div class="nav-ico">ğŸ¨</div><span>Colour</span></a>
    <a href="/Enigma-/sounds.html"><div class="nav-ico">ğŸ§</div><span>Sounds</span></a>
    <a href="/Enigma-/progress.html"><div class="nav-ico">ğŸ“ˆ</div><span>Progress</span></a>
  </nav>

  <!-- IMPORTANT: must load app.js -->
  <script src="/Enigma-/app.js?v=3001"></script>

  <!-- Wire buttons even if cached -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const n = document.getElementById("modeNumberBtn");
      const f = document.getElementById("modeFreeBtn");
      if(n) n.onclick = () => setColourMode("number");
      if(f) f.onclick = () => setColourMode("free");
    });
  </script>
</body>
</html>
