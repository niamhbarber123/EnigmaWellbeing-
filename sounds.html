<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Music â€¢ Enigma</title>
  <link rel="stylesheet" href="style.css?v=9301" />
</head>

<body class="page-wrap">
  <button id="themeFab" class="theme-toggle-top" type="button" aria-label="Toggle night mode">ğŸŒ™</button>

  <header class="page-header">
    <button class="back-btn" type="button" onclick="enigmaBack()">â†</button>
    <h1>Music</h1>
    <p>Choose a mood, then tap a link</p>
  </header>

  <main class="page">
    <div class="card">
      <div class="section-title">Your mood</div>
      <div class="chip-row" id="moodChips">
        <button class="chip active" data-mood="all" type="button">All</button>
        <button class="chip" data-mood="anxious" type="button">Anxious</button>
        <button class="chip" data-mood="stressed" type="button">Stressed</button>
        <button class="chip" data-mood="low" type="button">Low mood</button>
        <button class="chip" data-mood="focus" type="button">Focus</button>
        <button class="chip" data-mood="sleep" type="button">Sleep</button>
      </div>
      <div class="gentle-text" id="moodHint">Showing: All</div>
    </div>

    <div class="card">
      <div class="section-title">Minutes listened</div>
      <div class="listen-stats">
        <div class="stat">
          <div class="stat-num" id="todayMinutes">0</div>
          <div class="stat-label">Today</div>
        </div>
        <div class="stat">
          <div class="stat-num" id="totalMinutes">0</div>
          <div class="stat-label">Total</div>
        </div>
      </div>
      <div class="tool-row">
        <button class="tool-btn" type="button" id="endSessionBtn">End listening session</button>
      </div>
      <div class="gentle-text" id="sessionStatus">No active session.</div>
    </div>

    <div class="card">
      <div class="section-title">Pick a track</div>
      <div class="sound-links" id="soundLinks"></div>

      <div class="gentle-text" style="margin-top:10px;">
        Tip: links open in a new tab. Start by tapping a link (iPhone rule).
      </div>
    </div>
  </main>

  <nav class="bottom-nav">
    <a href="index.html"><div class="nav-ico">ğŸ </div><span>Home</span></a>
    <a href="breathe.html"><div class="nav-ico">ğŸŒ¬ï¸</div><span>Breathe</span></a>
    <a href="journal.html"><div class="nav-ico">ğŸ“–</div><span>Journal</span></a>
    <a href="quotes.html"><div class="nav-ico">ğŸ’¬</div><span>Quotes</span></a>
    <a href="game.html"><div class="nav-ico">ğŸ¨</div><span>Colour</span></a>
    <a class="active" href="sounds.html"><div class="nav-ico">ğŸµ</div><span>Music</span></a>
    <a href="progress.html"><div class="nav-ico">ğŸ“ˆ</div><span>Progress</span></a>
  </nav>

  <script src="app.js?v=9301"></script>
  <script src="sounds.js?v=9301"></script>

  <!-- Extra: force open in new tab if Safari blocks normal tap -->
  <script>
    document.addEventListener("click", (e)=>{
      const a = e.target.closest("a.sound-link");
      if (!a) return;
      // direct user interaction -> safe to open
      a.target = "_blank";
      a.rel = "noopener";
    }, { passive:true });
  </script>
</body>
</html>
